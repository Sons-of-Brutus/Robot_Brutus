<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Brutus: Pca9685Servo Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Brutus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classPca9685Servo-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Pca9685Servo Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Pca9685Servo_8h_source.html">Pca9685Servo.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae5818182145460d8e4b547aa3d8ca3f6" id="r_ae5818182145460d8e4b547aa3d8ca3f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#ae5818182145460d8e4b547aa3d8ca3f6">Pca9685Servo</a> ()</td></tr>
<tr class="memdesc:ae5818182145460d8e4b547aa3d8ca3f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:ae5818182145460d8e4b547aa3d8ca3f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91958fd92f16a4774813de0ea134d89c" id="r_a91958fd92f16a4774813de0ea134d89c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#a91958fd92f16a4774813de0ea134d89c">init</a> (Adafruit_PWMServoDriver *pca, int pca_idx, int min_pwm_pulse_period, int max_pwm_pulse_period, float min_angle, float max_angle)</td></tr>
<tr class="memdesc:a91958fd92f16a4774813de0ea134d89c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a <a class="el" href="classPca9685Servo.html">Pca9685Servo</a> object with the given parameters.  <br /></td></tr>
<tr class="separator:a91958fd92f16a4774813de0ea134d89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a217c1f47f4b69325a632b5984574b863" id="r_a217c1f47f4b69325a632b5984574b863"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#a217c1f47f4b69325a632b5984574b863">set_angle</a> (float angle, uint16_t on_tick=0)</td></tr>
<tr class="memdesc:a217c1f47f4b69325a632b5984574b863"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a PWM pulse corresponding to an angle to the specified servo.  <br /></td></tr>
<tr class="separator:a217c1f47f4b69325a632b5984574b863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff74f71fb25708b8660817c36f7f5a07" id="r_aff74f71fb25708b8660817c36f7f5a07"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#aff74f71fb25708b8660817c36f7f5a07">get_angle</a> ()</td></tr>
<tr class="separator:aff74f71fb25708b8660817c36f7f5a07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefbdb59d4c315c424056af141387c95" id="r_abefbdb59d4c315c424056af141387c95"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#abefbdb59d4c315c424056af141387c95">normalize_to_servo_range</a> (float angle)</td></tr>
<tr class="memdesc:abefbdb59d4c315c424056af141387c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps an angle into the servo's valid range.  <br /></td></tr>
<tr class="separator:abefbdb59d4c315c424056af141387c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad0fa55efb854cf76a3a170fff1d9a96e" id="r_ad0fa55efb854cf76a3a170fff1d9a96e"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#ad0fa55efb854cf76a3a170fff1d9a96e">us_to_pwm</a> (float pulse_width_us)</td></tr>
<tr class="memdesc:ad0fa55efb854cf76a3a170fff1d9a96e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a pulse width in microseconds to a PWM value for the PCA9685.  <br /></td></tr>
<tr class="separator:ad0fa55efb854cf76a3a170fff1d9a96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc92e398e719d9bd3c326d0790b5e76" id="r_a7bc92e398e719d9bd3c326d0790b5e76"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#a7bc92e398e719d9bd3c326d0790b5e76">angle_to_pwm</a> (float angle, float min_angle, float max_angle, uint16_t min_pwm, uint16_t max_pwm)</td></tr>
<tr class="memdesc:a7bc92e398e719d9bd3c326d0790b5e76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an angle to a PWM value for the PCA9685.  <br /></td></tr>
<tr class="separator:a7bc92e398e719d9bd3c326d0790b5e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae624a9892768e28751ec2711db23d49c" id="r_ae624a9892768e28751ec2711db23d49c"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPca9685Servo.html#ae624a9892768e28751ec2711db23d49c">pwm_to_angle</a> (uint16_t pwm, uint16_t min_pwm, uint16_t max_pwm, float min_angle, float max_angle)</td></tr>
<tr class="memdesc:ae624a9892768e28751ec2711db23d49c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a PWM value from the PCA9685 back to the corresponding angle.  <br /></td></tr>
<tr class="separator:ae624a9892768e28751ec2711db23d49c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae5818182145460d8e4b547aa3d8ca3f6" name="ae5818182145460d8e4b547aa3d8ca3f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5818182145460d8e4b547aa3d8ca3f6">&#9670;&#160;</a></span>Pca9685Servo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Pca9685Servo::Pca9685Servo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7bc92e398e719d9bd3c326d0790b5e76" name="a7bc92e398e719d9bd3c326d0790b5e76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bc92e398e719d9bd3c326d0790b5e76">&#9670;&#160;</a></span>angle_to_pwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t Pca9685Servo::angle_to_pwm </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>min_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>min_pwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_pwm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts an angle to a PWM value for the PCA9685. </p>
<p>This function maps the servo angle linearly to the corresponding PWM value. It is useful to send position commands in human-understandable units (degrees).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">angle</td><td>Desired angle for the servo. </td></tr>
    <tr><td class="paramname">min_angle</td><td>Minimum achievable angle of the servo. </td></tr>
    <tr><td class="paramname">max_angle</td><td>Maximum achievable angle of the servo. </td></tr>
    <tr><td class="paramname">min_pwm</td><td>PWM value corresponding to the minimum angle. </td></tr>
    <tr><td class="paramname">max_pwm</td><td>PWM value corresponding to the maximum angle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint16_t PWM value corresponding to the desired angle.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Angles below min_angle are clamped to min_angle. </dd>
<dd>
Angles above max_angle are clamped to max_angle. </dd>
<dd>
The angle-to-PWM mapping is linear. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_a7bc92e398e719d9bd3c326d0790b5e76_icgraph.png" border="0" usemap="#aclassPca9685Servo_a7bc92e398e719d9bd3c326d0790b5e76_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_a7bc92e398e719d9bd3c326d0790b5e76_icgraph" id="aclassPca9685Servo_a7bc92e398e719d9bd3c326d0790b5e76_icgraph">
<area shape="rect" title="Converts an angle to a PWM value for the PCA9685." alt="" coords="1279,165,1437,205"/>
<area shape="rect" href="classPca9685Servo.html#a91958fd92f16a4774813de0ea134d89c" title="Initializes a Pca9685Servo object with the given parameters." alt="" coords="1067,141,1209,166"/>
<area shape="poly" title=" " alt="" coords="1264,174,1209,166,1210,161,1265,169"/>
<area shape="rect" href="classPca9685Servo.html#a217c1f47f4b69325a632b5984574b863" title="Sends a PWM pulse corresponding to an angle to the specified servo." alt="" coords="1045,197,1231,222"/>
<area shape="poly" title=" " alt="" coords="1265,198,1231,202,1231,197,1264,193"/>
<area shape="rect" href="classBrutusLegInterface.html#a08264bf811ddf99c63bdc7b0d1dfdfa5" title="Configures the ELBOW servo." alt="" coords="852,69,997,109"/>
<area shape="poly" title=" " alt="" coords="1081,139,991,112,993,107,1082,134"/>
<area shape="rect" href="classBrutusLegInterface.html#a5e8a2486918f1c17f3a51651d99fb2e1" title="Configures the SHOULDER servo." alt="" coords="852,133,997,173"/>
<area shape="poly" title=" " alt="" coords="1053,156,998,156,998,151,1053,151"/>
<area shape="rect" href="classBrutus.html#a75a3a5c4843a9f4b9d840f2fc6a26d40" title="Configures the BACK LEFT LEG." alt="" coords="657,69,804,109"/>
<area shape="poly" title=" " alt="" coords="838,92,804,92,804,87,838,87"/>
<area shape="rect" href="classBrutus.html#a60853191d5708cb3fac20839ffc5bfc7" title="Configures the BACK RIGHT LEG." alt="" coords="657,133,804,173"/>
<area shape="poly" title=" " alt="" coords="851,116,793,136,791,131,849,111"/>
<area shape="rect" href="classBrutus.html#a282d661633e91de4636e2ecd9fa98971" title="Configures the FRONT LEFT LEG." alt="" coords="657,197,804,237"/>
<area shape="poly" title=" " alt="" coords="860,119,854,123,839,139,830,155,821,171,806,187,787,199,784,195,802,183,817,168,826,152,835,136,850,119,857,114"/>
<area shape="rect" href="classBrutus.html#aaccc2d83846f065d0393e85405fddd51" title="Configures the FRONT RIGHT LEG." alt="" coords="657,5,804,45"/>
<area shape="poly" title=" " alt="" coords="849,67,791,48,793,43,851,62"/>
<area shape="poly" title=" " alt="" coords="849,131,791,112,793,107,851,126"/>
<area shape="poly" title=" " alt="" coords="838,156,804,156,804,151,838,151"/>
<area shape="poly" title=" " alt="" coords="851,180,793,200,791,195,849,175"/>
<area shape="poly" title=" " alt="" coords="857,128,850,123,835,107,826,91,817,75,802,59,784,48,787,43,806,55,821,72,830,88,839,104,854,119,860,124"/>
<area shape="rect" href="classBrutusLegInterface.html#a3779b8a155a1225ce144647b37fc6110" title="Commands the leg&#39;s servos a desired leg state angles." alt="" coords="852,225,997,265"/>
<area shape="poly" title=" " alt="" coords="1049,227,998,236,997,230,1048,222"/>
<area shape="rect" href="classBrutus.html#a31b0640380df00a8187667e36c386570" title="Commands the robot to adopt a given pose." alt="" coords="665,262,796,287"/>
<area shape="poly" title=" " alt="" coords="839,261,796,267,796,262,838,256"/>
<area shape="rect" href="classBrutus.html#ad54f6a545161e676723e032a32a29a5f" title="Main motion control loop." alt="" coords="456,237,609,262"/>
<area shape="poly" title=" " alt="" coords="651,267,609,262,610,256,652,262"/>
<area shape="rect" href="classBrutus.html#a79114236194683af9da146cba8f93e06" title="Finalizes setup and moves the robot to the standing pose." alt="" coords="481,286,584,311"/>
<area shape="poly" title=" " alt="" coords="651,287,585,295,584,290,651,282"/>
<area shape="rect" href="classBrutus.html#ad9f936bd4254cee1ed486f3b8c871dcf" title="FreeRTOS wrapper for the motion task." alt="" coords="255,229,408,269"/>
<area shape="poly" title=" " alt="" coords="442,252,408,252,408,247,442,247"/>
<area shape="rect" href="classBrutus.html#a5cfdd97187b803d1c6e89c49c65c0e98" title="Creates the motion control task." alt="" coords="5,237,207,262"/>
<area shape="poly" title=" " alt="" coords="241,252,207,252,207,247,241,247"/>
</map>
</div>

</div>
</div>
<a id="aff74f71fb25708b8660817c36f7f5a07" name="aff74f71fb25708b8660817c36f7f5a07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff74f71fb25708b8660817c36f7f5a07">&#9670;&#160;</a></span>get_angle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float Pca9685Servo::get_angle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Actual servo's angle. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_cgraph.png" border="0" usemap="#aclassPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_cgraph" alt=""/></div>
<map name="aclassPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_cgraph" id="aclassPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,192,38"/>
<area shape="rect" href="classPca9685Servo.html#ae624a9892768e28751ec2711db23d49c" title="Converts a PWM value from the PCA9685 back to the corresponding angle." alt="" coords="240,5,415,45"/>
<area shape="poly" title=" " alt="" coords="193,23,226,23,226,28,193,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_icgraph.png" border="0" usemap="#aclassPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_icgraph" id="aclassPca9685Servo_aff74f71fb25708b8660817c36f7f5a07_icgraph">
<area shape="rect" title=" " alt="" coords="395,13,581,38"/>
<area shape="rect" href="classBrutusLegInterface.html#a45b08da757d2690b80a009dd5493174d" title="Returns the current leg state." alt="" coords="201,5,347,45"/>
<area shape="poly" title=" " alt="" coords="381,28,347,28,347,23,381,23"/>
<area shape="rect" href="classBrutus.html#a29100e678aba23297b1fbcda859dad30" title="Reads the current robot pose from the servos." alt="" coords="5,13,153,38"/>
<area shape="poly" title=" " alt="" coords="187,28,154,28,154,23,187,23"/>
</map>
</div>

</div>
</div>
<a id="a91958fd92f16a4774813de0ea134d89c" name="a91958fd92f16a4774813de0ea134d89c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91958fd92f16a4774813de0ea134d89c">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Pca9685Servo::init </td>
          <td>(</td>
          <td class="paramtype">Adafruit_PWMServoDriver *&#160;</td>
          <td class="paramname"><em>pca</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pca_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_pwm_pulse_period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_pwm_pulse_period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>min_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a <a class="el" href="classPca9685Servo.html">Pca9685Servo</a> object with the given parameters. </p>
<p>This method sets up the servo to use the specified PCA9685 controller, configures the PWM pin, pulse width limits, and angle limits. It also calculates the initial PWM value corresponding to the midpoint angle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pca</td><td>Pointer to the Adafruit_PWMServoDriver instance controlling the PCA9685. </td></tr>
    <tr><td class="paramname">pca_idx</td><td>The PCA9685 channel/pin number where the servo is connected. </td></tr>
    <tr><td class="paramname">min_pwm_pulse_period</td><td>Minimum PWM pulse width in microseconds for the servo. </td></tr>
    <tr><td class="paramname">max_pwm_pulse_period</td><td>Maximum PWM pulse width in microseconds for the servo. </td></tr>
    <tr><td class="paramname">min_angle</td><td>Minimum angle the servo can reach (degrees). </td></tr>
    <tr><td class="paramname">max_angle</td><td>Maximum angle the servo can reach (degrees). </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_a91958fd92f16a4774813de0ea134d89c_cgraph.png" border="0" usemap="#aclassPca9685Servo_a91958fd92f16a4774813de0ea134d89c_cgraph" alt=""/></div>
<map name="aclassPca9685Servo_a91958fd92f16a4774813de0ea134d89c_cgraph" id="aclassPca9685Servo_a91958fd92f16a4774813de0ea134d89c_cgraph">
<area shape="rect" title="Initializes a Pca9685Servo object with the given parameters." alt="" coords="5,42,148,67"/>
<area shape="rect" href="classPca9685Servo.html#a7bc92e398e719d9bd3c326d0790b5e76" title="Converts an angle to a PWM value for the PCA9685." alt="" coords="215,5,373,45"/>
<area shape="poly" title=" " alt="" coords="148,42,201,35,201,40,149,48"/>
<area shape="rect" href="classPca9685Servo.html#ad0fa55efb854cf76a3a170fff1d9a96e" title="Converts a pulse width in microseconds to a PWM value for the PCA9685." alt="" coords="196,70,392,95"/>
<area shape="poly" title=" " alt="" coords="149,61,183,66,182,71,148,66"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_a91958fd92f16a4774813de0ea134d89c_icgraph.png" border="0" usemap="#aclassPca9685Servo_a91958fd92f16a4774813de0ea134d89c_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_a91958fd92f16a4774813de0ea134d89c_icgraph" id="aclassPca9685Servo_a91958fd92f16a4774813de0ea134d89c_icgraph">
<area shape="rect" title="Initializes a Pca9685Servo object with the given parameters." alt="" coords="393,109,536,134"/>
<area shape="rect" href="classBrutusLegInterface.html#a08264bf811ddf99c63bdc7b0d1dfdfa5" title="Configures the ELBOW servo." alt="" coords="200,69,345,109"/>
<area shape="poly" title=" " alt="" coords="379,110,345,104,346,99,380,105"/>
<area shape="rect" href="classBrutusLegInterface.html#a5e8a2486918f1c17f3a51651d99fb2e1" title="Configures the SHOULDER servo." alt="" coords="200,133,345,173"/>
<area shape="poly" title=" " alt="" coords="380,138,346,144,345,139,379,133"/>
<area shape="rect" href="classBrutus.html#a75a3a5c4843a9f4b9d840f2fc6a26d40" title="Configures the BACK LEFT LEG." alt="" coords="5,133,152,173"/>
<area shape="poly" title=" " alt="" coords="199,116,141,136,139,131,197,111"/>
<area shape="rect" href="classBrutus.html#a60853191d5708cb3fac20839ffc5bfc7" title="Configures the BACK RIGHT LEG." alt="" coords="5,197,152,237"/>
<area shape="poly" title=" " alt="" coords="208,119,202,123,187,139,178,155,169,171,154,187,135,199,132,195,150,183,165,168,174,152,183,136,198,119,205,114"/>
<area shape="rect" href="classBrutus.html#a282d661633e91de4636e2ecd9fa98971" title="Configures the FRONT LEFT LEG." alt="" coords="5,5,152,45"/>
<area shape="poly" title=" " alt="" coords="197,67,139,48,141,43,199,62"/>
<area shape="rect" href="classBrutus.html#aaccc2d83846f065d0393e85405fddd51" title="Configures the FRONT RIGHT LEG." alt="" coords="5,69,152,109"/>
<area shape="poly" title=" " alt="" coords="186,92,152,92,152,87,186,87"/>
<area shape="poly" title=" " alt="" coords="186,156,152,156,152,151,186,151"/>
<area shape="poly" title=" " alt="" coords="199,180,141,200,139,195,197,175"/>
<area shape="poly" title=" " alt="" coords="205,128,198,123,183,107,174,91,165,75,150,59,132,48,135,43,154,55,169,72,178,88,187,104,202,119,208,124"/>
<area shape="poly" title=" " alt="" coords="197,131,139,112,141,107,199,126"/>
</map>
</div>

</div>
</div>
<a id="abefbdb59d4c315c424056af141387c95" name="abefbdb59d4c315c424056af141387c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abefbdb59d4c315c424056af141387c95">&#9670;&#160;</a></span>normalize_to_servo_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float Pca9685Servo::normalize_to_servo_range </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wraps an angle into the servo's valid range. </p>
<p>Normalizes the input angle so it fits within [min_angle, max_angle].</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">angle</td><td>Input angle in degrees. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float Normalized angle within the servo range. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_abefbdb59d4c315c424056af141387c95_icgraph.png" border="0" usemap="#aclassPca9685Servo_abefbdb59d4c315c424056af141387c95_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_abefbdb59d4c315c424056af141387c95_icgraph" id="aclassPca9685Servo_abefbdb59d4c315c424056af141387c95_icgraph">
<area shape="rect" title="Wraps an angle into the servo&#39;s valid range." alt="" coords="1263,31,1449,71"/>
<area shape="rect" href="classPca9685Servo.html#a217c1f47f4b69325a632b5984574b863" title="Sends a PWM pulse corresponding to an angle to the specified servo." alt="" coords="1029,38,1215,63"/>
<area shape="poly" title=" " alt="" coords="1249,53,1215,53,1215,48,1249,48"/>
<area shape="rect" href="classBrutusLegInterface.html#a3779b8a155a1225ce144647b37fc6110" title="Commands the leg&#39;s servos a desired leg state angles." alt="" coords="836,31,981,71"/>
<area shape="poly" title=" " alt="" coords="1016,53,982,53,982,48,1016,48"/>
<area shape="rect" href="classBrutus.html#a31b0640380df00a8187667e36c386570" title="Commands the robot to adopt a given pose." alt="" coords="657,38,788,63"/>
<area shape="poly" title=" " alt="" coords="823,53,788,53,788,48,823,48"/>
<area shape="rect" href="classBrutus.html#ad54f6a545161e676723e032a32a29a5f" title="Main motion control loop." alt="" coords="456,13,609,38"/>
<area shape="poly" title=" " alt="" coords="643,43,609,38,610,33,644,37"/>
<area shape="rect" href="classBrutus.html#a79114236194683af9da146cba8f93e06" title="Finalizes setup and moves the robot to the standing pose." alt="" coords="481,62,584,87"/>
<area shape="poly" title=" " alt="" coords="644,63,585,71,584,66,643,58"/>
<area shape="rect" href="classBrutus.html#ad9f936bd4254cee1ed486f3b8c871dcf" title="FreeRTOS wrapper for the motion task." alt="" coords="255,5,408,45"/>
<area shape="poly" title=" " alt="" coords="442,28,408,28,408,23,442,23"/>
<area shape="rect" href="classBrutus.html#a5cfdd97187b803d1c6e89c49c65c0e98" title="Creates the motion control task." alt="" coords="5,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
</map>
</div>

</div>
</div>
<a id="ae624a9892768e28751ec2711db23d49c" name="ae624a9892768e28751ec2711db23d49c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae624a9892768e28751ec2711db23d49c">&#9670;&#160;</a></span>pwm_to_angle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float Pca9685Servo::pwm_to_angle </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>min_pwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_pwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>min_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a PWM value from the PCA9685 back to the corresponding angle. </p>
<p>This is the inverse of angle_to_pwm, allowing you to estimate the actual servo angle from a PWM value sent or read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwm</td><td>Current PWM value. </td></tr>
    <tr><td class="paramname">min_pwm</td><td>PWM value corresponding to the minimum angle. </td></tr>
    <tr><td class="paramname">max_pwm</td><td>PWM value corresponding to the maximum angle. </td></tr>
    <tr><td class="paramname">min_angle</td><td>Minimum achievable angle of the servo. </td></tr>
    <tr><td class="paramname">max_angle</td><td>Maximum achievable angle of the servo. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float Angle corresponding to the provided PWM value.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>PWM values below min_pwm are clamped to min_pwm. </dd>
<dd>
PWM values above max_pwm are clamped to max_pwm. </dd>
<dd>
The PWM-to-angle mapping is linear. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_ae624a9892768e28751ec2711db23d49c_icgraph.png" border="0" usemap="#aclassPca9685Servo_ae624a9892768e28751ec2711db23d49c_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_ae624a9892768e28751ec2711db23d49c_icgraph" id="aclassPca9685Servo_ae624a9892768e28751ec2711db23d49c_icgraph">
<area shape="rect" title="Converts a PWM value from the PCA9685 back to the corresponding angle." alt="" coords="629,5,804,45"/>
<area shape="rect" href="classPca9685Servo.html#aff74f71fb25708b8660817c36f7f5a07" title=" " alt="" coords="395,13,581,38"/>
<area shape="poly" title=" " alt="" coords="616,28,582,28,582,23,616,23"/>
<area shape="rect" href="classBrutusLegInterface.html#a45b08da757d2690b80a009dd5493174d" title="Returns the current leg state." alt="" coords="201,5,347,45"/>
<area shape="poly" title=" " alt="" coords="381,28,347,28,347,23,381,23"/>
<area shape="rect" href="classBrutus.html#a29100e678aba23297b1fbcda859dad30" title="Reads the current robot pose from the servos." alt="" coords="5,13,153,38"/>
<area shape="poly" title=" " alt="" coords="187,28,154,28,154,23,187,23"/>
</map>
</div>

</div>
</div>
<a id="a217c1f47f4b69325a632b5984574b863" name="a217c1f47f4b69325a632b5984574b863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a217c1f47f4b69325a632b5984574b863">&#9670;&#160;</a></span>set_angle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Pca9685Servo::set_angle </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>on_tick</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a PWM pulse corresponding to an angle to the specified servo. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">angle</td><td>Desired angle, normalized to [this-&gt;min_angle, this-&gt;max_angle] </td></tr>
    <tr><td class="paramname">on_tick</td><td>The tick when the PCA send the pulse to the servo </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_a217c1f47f4b69325a632b5984574b863_cgraph.png" border="0" usemap="#aclassPca9685Servo_a217c1f47f4b69325a632b5984574b863_cgraph" alt=""/></div>
<map name="aclassPca9685Servo_a217c1f47f4b69325a632b5984574b863_cgraph" id="aclassPca9685Servo_a217c1f47f4b69325a632b5984574b863_cgraph">
<area shape="rect" title="Sends a PWM pulse corresponding to an angle to the specified servo." alt="" coords="5,45,191,70"/>
<area shape="rect" href="classPca9685Servo.html#a7bc92e398e719d9bd3c326d0790b5e76" title="Converts an angle to a PWM value for the PCA9685." alt="" coords="253,5,411,45"/>
<area shape="poly" title=" " alt="" coords="190,42,239,35,240,41,191,47"/>
<area shape="rect" href="classPca9685Servo.html#abefbdb59d4c315c424056af141387c95" title="Wraps an angle into the servo&#39;s valid range." alt="" coords="239,69,425,109"/>
<area shape="poly" title=" " alt="" coords="191,67,225,72,225,77,190,73"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_a217c1f47f4b69325a632b5984574b863_icgraph.png" border="0" usemap="#aclassPca9685Servo_a217c1f47f4b69325a632b5984574b863_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_a217c1f47f4b69325a632b5984574b863_icgraph" id="aclassPca9685Servo_a217c1f47f4b69325a632b5984574b863_icgraph">
<area shape="rect" title="Sends a PWM pulse corresponding to an angle to the specified servo." alt="" coords="1029,38,1215,63"/>
<area shape="rect" href="classBrutusLegInterface.html#a3779b8a155a1225ce144647b37fc6110" title="Commands the leg&#39;s servos a desired leg state angles." alt="" coords="836,31,981,71"/>
<area shape="poly" title=" " alt="" coords="1016,53,982,53,982,48,1016,48"/>
<area shape="rect" href="classBrutus.html#a31b0640380df00a8187667e36c386570" title="Commands the robot to adopt a given pose." alt="" coords="657,38,788,63"/>
<area shape="poly" title=" " alt="" coords="823,53,788,53,788,48,823,48"/>
<area shape="rect" href="classBrutus.html#ad54f6a545161e676723e032a32a29a5f" title="Main motion control loop." alt="" coords="456,13,609,38"/>
<area shape="poly" title=" " alt="" coords="643,43,609,38,610,33,644,37"/>
<area shape="rect" href="classBrutus.html#a79114236194683af9da146cba8f93e06" title="Finalizes setup and moves the robot to the standing pose." alt="" coords="481,62,584,87"/>
<area shape="poly" title=" " alt="" coords="644,63,585,71,584,66,643,58"/>
<area shape="rect" href="classBrutus.html#ad9f936bd4254cee1ed486f3b8c871dcf" title="FreeRTOS wrapper for the motion task." alt="" coords="255,5,408,45"/>
<area shape="poly" title=" " alt="" coords="442,28,408,28,408,23,442,23"/>
<area shape="rect" href="classBrutus.html#a5cfdd97187b803d1c6e89c49c65c0e98" title="Creates the motion control task." alt="" coords="5,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
</map>
</div>

</div>
</div>
<a id="ad0fa55efb854cf76a3a170fff1d9a96e" name="ad0fa55efb854cf76a3a170fff1d9a96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0fa55efb854cf76a3a170fff1d9a96e">&#9670;&#160;</a></span>us_to_pwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t Pca9685Servo::us_to_pwm </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pulse_width_us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a pulse width in microseconds to a PWM value for the PCA9685. </p>
<p>The PCA9685 uses a 12-bit resolution (0-4095) to generate the PWM signal. This function converts a pulse width in microseconds to the corresponding register value to send to the PCA9685.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pulse_width_us</td><td>Desired pulse width in microseconds (us). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint16_t PWM value corresponding to the pulse width, clamped to [0, 4095].</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Values below 0 are clamped to 0. </dd>
<dd>
Values above 4095 are clamped to the maximum allowed. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPca9685Servo_ad0fa55efb854cf76a3a170fff1d9a96e_icgraph.png" border="0" usemap="#aclassPca9685Servo_ad0fa55efb854cf76a3a170fff1d9a96e_icgraph" alt=""/></div>
<map name="aclassPca9685Servo_ad0fa55efb854cf76a3a170fff1d9a96e_icgraph" id="aclassPca9685Servo_ad0fa55efb854cf76a3a170fff1d9a96e_icgraph">
<area shape="rect" title="Converts a pulse width in microseconds to a PWM value for the PCA9685." alt="" coords="584,109,780,134"/>
<area shape="rect" href="classPca9685Servo.html#a91958fd92f16a4774813de0ea134d89c" title="Initializes a Pca9685Servo object with the given parameters." alt="" coords="393,109,536,134"/>
<area shape="poly" title=" " alt="" coords="570,124,537,124,537,119,570,119"/>
<area shape="rect" href="classBrutusLegInterface.html#a08264bf811ddf99c63bdc7b0d1dfdfa5" title="Configures the ELBOW servo." alt="" coords="200,69,345,109"/>
<area shape="poly" title=" " alt="" coords="379,110,345,104,346,99,380,105"/>
<area shape="rect" href="classBrutusLegInterface.html#a5e8a2486918f1c17f3a51651d99fb2e1" title="Configures the SHOULDER servo." alt="" coords="200,133,345,173"/>
<area shape="poly" title=" " alt="" coords="380,138,346,144,345,139,379,133"/>
<area shape="rect" href="classBrutus.html#a75a3a5c4843a9f4b9d840f2fc6a26d40" title="Configures the BACK LEFT LEG." alt="" coords="5,133,152,173"/>
<area shape="poly" title=" " alt="" coords="199,116,141,136,139,131,197,111"/>
<area shape="rect" href="classBrutus.html#a60853191d5708cb3fac20839ffc5bfc7" title="Configures the BACK RIGHT LEG." alt="" coords="5,197,152,237"/>
<area shape="poly" title=" " alt="" coords="208,119,202,123,187,139,178,155,169,171,154,187,135,199,132,195,150,183,165,168,174,152,183,136,198,119,205,114"/>
<area shape="rect" href="classBrutus.html#a282d661633e91de4636e2ecd9fa98971" title="Configures the FRONT LEFT LEG." alt="" coords="5,5,152,45"/>
<area shape="poly" title=" " alt="" coords="197,67,139,48,141,43,199,62"/>
<area shape="rect" href="classBrutus.html#aaccc2d83846f065d0393e85405fddd51" title="Configures the FRONT RIGHT LEG." alt="" coords="5,69,152,109"/>
<area shape="poly" title=" " alt="" coords="186,92,152,92,152,87,186,87"/>
<area shape="poly" title=" " alt="" coords="186,156,152,156,152,151,186,151"/>
<area shape="poly" title=" " alt="" coords="199,180,141,200,139,195,197,175"/>
<area shape="poly" title=" " alt="" coords="205,128,198,123,183,107,174,91,165,75,150,59,132,48,135,43,154,55,169,72,178,88,187,104,202,119,208,124"/>
<area shape="poly" title=" " alt="" coords="197,131,139,112,141,107,199,126"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>brutus_esp32/<a class="el" href="Pca9685Servo_8h_source.html">Pca9685Servo.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
